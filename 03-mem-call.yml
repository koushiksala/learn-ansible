- name: Print Used memory
  hosts: localhost
  tasks:
    - name: Get Memory
      ansible.builtin.shell: free | grep Mem
      register: Free

    - name: Set a Fact
      ansible.builtin.set_fact:
        Free: "{{ free.stdout | split (' ') }}"

    - name: Print free variable
      ansible.builtin.set_fact:
         total: "{{ FREE[1] }}"
         free: "{{ FREE[3]  }}"

    - name: Print free output
      ansible.builtin.debug:
        msg: "{{ free| int/total| int }}"